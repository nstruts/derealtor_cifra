# derealtor_cifra

Документация к коду в main.py

1. Библиотеки и модули

	•	asyncio: для асинхронного управления задачами.
	•	telethon: для взаимодействия с API Telegram.
	•	logging: для системного логирования и вывода отладочной информации.
	•	openai: для интеграции с сервисами OpenAI.
	•	dotenv: для загрузки переменных окружения из файла .env.
	•	pandas и numpy: для работы с данными и выполнения численных операций.
	•	sklearn.metrics.pairwise: для расчета косинусного сходства.
	•	csv и json: для чтения и записи данных в форматах CSV и JSON.
	•	concurrent.futures: для выполнения параллельных задач.

2. Конфигурация и настройка

	•	Загружает переменные окружения, включая ключи API и названия каналов.
	•	Инициализирует TelegramClient с этими учетными данными.
	•	Создает глобальный DataFrame, ads_df, для хранения данных объявлений.
	•	Если файл CSV (ads_data.csv) существует, загружает предыдущие объявления, иначе инициализирует пустой DataFrame.

3. Классы

	•	Location: хранит атрибуты местоположения, такие как city, metro и необязательный address.
	•	Apartment: содержит характеристики квартиры, такие как количество комнат, тип ремонта и наличие мебели.
	•	Building: описывает атрибуты здания, такие как наличие парковки, удаленность от метро и близлежащая инфраструктура.
	•	Finance: содержит финансовые параметры, такие как ежемесячная цена, коммунальные платежи, залог и комиссия.
	•	Advertisement: объединяет Location, Apartment, Building и Finance для представления полного объявления о недвижимости.

4. Основные функции

	•	print_advertisement_info(ad): форматирует и отображает все детали объявления, получая каждый атрибут из Location, Apartment, Building и Finance.
	•	ad_to_vector(ad): преобразует экземпляр Advertisement в числовой вектор. Каждый атрибут преобразуется или кодируется для создания структурированного вектора признаков, который может быть полезен для сравнения схожести или использования в моделях машинного обучения.
	•	Функции кодирования категориальных признаков:
	•	encode_city(city): кодирует названия городов в уникальные целые числа.
	•	encode_metro(metro): преобразует названия станций метро в уникальные значения.
	•	Дополнительные функции кодирования (не полностью показаны) вероятно обрабатывают категориальные признаки, такие как тип ремонта, наличие балкона, тип парковки и т.д.

5. Хранение и обработка данных

	•	DataFrame ads_df сохраняется в ads_data.csv после каждого обновления, что гарантирует сохранение данных.
	•	Каждое объявление обрабатывается и сохраняется в виде вектора для простого извлечения и анализа сходства.

6. Обработка ошибок и логирование

	•	Убеждается, что все необходимые переменные окружения загружены, и завершает работу, если каких-либо данных не хватает.
	•	Логирует информацию о конфигурации для отладки, маскируя конфиденциальные данные, такие как ключи API.
